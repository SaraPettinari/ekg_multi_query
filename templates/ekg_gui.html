<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" type="text/css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script type="text/javascript" src="{{ url_for('static', filename='js/script.js') }}">    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.24.0/cytoscape.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dagre@0.8.5/dist/dagre.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/cytoscape-dagre@2.5.0/cytoscape-dagre.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/svg.js@2.7.1/dist/svg.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/cytoscape-svg@0.4.0/cytoscape-svg.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
</head>

<body>
    <!-- SLIDERS-->
    <div class="container">
        <hr class="hr" />
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary justify-content-center">
            <h1 class="navbar-brand">Multi-Query Aggregation</h1>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <!--
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item active">
                        <a class="nav-link" onclick="showNav()">Sliders</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" onclick="showNav()">Analysis</a>
                    </li>
                </ul>
            </div>-->
        </nav>
        <hr class="hr" />
        <div class="row" id="sliders">

            <form method="POST" action="get_graph">
                <div class="row">
                    <div class="col">
                        <nav class="navbar navbar-expand-lg navbar-light bg-light">
                            <h1 class="navbar-brand">Node Aggregation</h1>
                        </nav>
                        <div class="row">
                            <label class="p" for="activity_slider">Activity:</label>
                            <input type="range" min="1" max="5" value="{{ activity_abstraction }}" step="1"
                                id="activity_slider" list="event_values" name="activity_slider" class="slider" />

                            <datalist id="event_values">
                                <option value="1" label="Identity"></option>
                                <option value="2" label="Predecessor Identity"></option>
                                <option value="3" label="Successor Identity"></option>
                                <option value="4" label="Neighbors Identity"></option>
                                <option value="5" label="Event Identity"></option>
                            </datalist>
                        </div>

                        <div class="row">
                            <label class="p" for="resource_slider">Robot:</label>
                            <input type="range" min="1" max="3" value="{{ resource_abstraction }}" step="1"
                                id="resource_slider" list="resource_values" name="resource_slider" class="slider" />

                            <datalist id="resource_values">
                                <option value="1" label="Identity"></option>
                                <option value="2" label="Type"></option>
                                <option value="3" label="None"></option>
                            </datalist>
                        </div>
                    </div>
                    <div class="col">
                        <nav class="navbar navbar-expand-lg navbar-light bg-light">
                            <h1 class="navbar-brand">Edge Aggregation</h1>
                        </nav>
                        <div class="row">
                            <label class="p" for="edge_msg">Message:</label>
                            <input type="range" min="1" max="2" value="1" step="1"
                                id="edge_msg" list="edge_msg_val" name="edge_msg" class="slider" />

                            <datalist id="edge_msg_val">
                                <option value="1" label="Show"></option>
                                <option value="2" label="Hide"></option>
                            </datalist>
                        </div>
                        <div class="row">
                            <label class="p" for="edge_robot">Robot:</label>
                            <input type="range" min="1" max="2" value="1" step="1"
                                id="edge_robot" list="edge_rob_val" name="edge_robot" class="slider" />

                            <datalist id="edge_rob_val">
                                <option value="1" label="Show"></option>
                                <option value="2" label="Hide"></option>
                            </datalist>
                        </div>
                    </div>
                </div>
                <!--              {% if communication %}
                <div class="row">
                    <label class="form-check-label" for="communication_link" name="communication_link">
                        <input class="form-check-input" type="checkbox" id="communication_link"
                            name="communication_link" onclick="showOptions()">
                        Show Communication Link
                    </label>
                </div>

                <div class="row" id="msg_slider_div" style="display:none">
                    <label class="h4" for="msg_slider">Choose event message abstraction:</label>
                    <input type="range" min="1" max="2" value="{{ msg_abstraction }}" step="1" id="msg_slider"
                        list="msg_values" name="msg_slider" class="slider" />

                    <datalist id="msg_values">
                        <option value="1" label="Each event message is a node"></option>
                        <option value="2" label="Same activities name and same message id aggregation"></option>
                    </datalist>
                </div>
                {% endif %}
-->
                <div class="row">
                    <input type="submit" class="btn btn-primary" value="Show Graph" />
                </div>
            </form>

        </div>
        <div class="row" id="analysis">
        </div>


        <div id="ekg">
            <!--           <div class="row" id="networkx"></div>-->
            <div class="row frame-graph" id="cyto"></div>

            <script>
                const response_data = {{ response_data|default ("") | tojson }}
                generate_ekg(response_data)
            </script>
        </div>
    </div>

</body>

</html>